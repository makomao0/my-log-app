<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>co:me-ãƒ‘ã‚ºãƒ«ã‚²ãƒ¼ãƒ </title>
    <link rel="stylesheet" href="./css/style.css">
    <link rel="icon" href="img/favicon.ico" type="image/x-icon">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kosugi+Maru&display=swap" rel="stylesheet">

    <style>
        .puzzle-body {
            background: #1a1a1a;
            color: #fff;
            text-align: center;
            touch-action: none;
            overflow: hidden;
            /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ç¦æ­¢ */
            height: 100vh;
            /* ç”»é¢ã´ã£ãŸã‚Š */
            margin: 0;
            display: flex;
            flex-direction: column;
        }



        .grid-board {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 4px;
            width: 85vw;
            /* ç”»é¢å¹…ã®85% */
            max-width: 320px;
            /* æœ€å¤§ã‚µã‚¤ã‚ºã‚’å°‘ã—æŠ‘ãˆã‚‹ */
            background: #333;
            padding: 8px;
            border-radius: 8px;
            margin: 10px auto;
        }


        .cell {
            aspect-ratio: 1;
            background: #444;
            border-radius: 4px;
            transition: 0.2s;
        }

        .cell.active {
            background: #ffcc00;
            box-shadow: 0 0 10px #ffcc00;
        }

        .piece-container {
            display: flex;
            justify-content: space-around;
            text-align: center;
            align-items: center;
            width: 70%;
            margin: 0 auto;
            padding: 10px 0;
            margin-top: 5px;
        }



        /* ãƒ”ãƒ¼ã‚¹ç½®ãå ´ã®1ã¤1ã¤ã®æ  */
        .piece-item {
            width: 70px;
            height: 70px;
            display: grid;
            /* 5x5ã®ç´°ã‹ã„ç¶²ç›®ã‚’ä½œã‚Šã€ãã“ã«ãƒ–ãƒ­ãƒƒã‚¯ã‚’ç½®ã */
            grid-template-columns: repeat(5, 16px);
            grid-template-rows: repeat(5, 16px);
            justify-content: center;
            align-content: center;

            border-radius: 10px;
            cursor: grab;
        }

        /* ãƒ”ãƒ¼ã‚¹ã‚’æ§‹æˆã™ã‚‹1ã¤1ã¤ã®å°ãƒ–ãƒ­ãƒƒã‚¯ */
        .p-block {
            width: 14px;
            height: 14px;
            background: #ffcc00;
            /* ãƒ­ã‚°ãƒã‚¤ãƒ³ãƒˆã®è‰² */
            border: 1px solid #000;
            border-radius: 2px;
        }

        /* ç½®ã‘ã‚‹å ´æ‰€ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆè–„ã„é»„è‰²ï¼‰ */
        .cell.preview {
            background: rgba(255, 204, 0, 0.4) !important;
        }

        /* æ ã‹ã‚‰ã¯ã¿å‡ºã—ãŸã‚Šé‡ãªã£ãŸã‚Šã—ã¦ç½®ã‘ãªã„æ™‚ã®è­¦å‘Šï¼ˆè–„ã„èµ¤ï¼‰ */
        .cell.invalid {
            background: rgba(255, 71, 87, 0.4) !important;
        }

        /* ãƒ”ãƒ¼ã‚¹ã®ç¨®é¡ã”ã¨ã®è‰²è¨­å®šï¼ˆå¿ƒã®è‰²ã‚’ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼‰ */
        .p-dot .p-block {
            background: #ff7675;
        }

        /* èµ¤ï¼šæƒ…ç†± */
        .p-bar .p-block {
            background: #74b9ff;
        }

        /* é’ï¼šå†·é™ */
        .p-square .p-block {
            background: #55efc4;
        }

        /* ç·‘ï¼šç™’ã‚„ã— */
        .p-L .p-block {
            background: #a29bfe;
        }

        /* ç´«ï¼šç¥ç§˜ */
        .p-T .p-block {
            background: #ffeaa7;
        }

        /* é»„ï¼šå¸Œæœ› */
        .p-BigSq .p-block {
            background: #fd79a8;
        }

        /* æ¡ƒï¼šæ„› */

        /* ãƒ‰ãƒ©ãƒƒã‚°ä¸­ã®ãƒ”ãƒ¼ã‚¹ã®çŠ¶æ…‹ */
        .piece-item.dragging {
            cursor: grabbing;
            transform: scale(2.5);
            transform-origin: center center;
            opacity: 0.9;
            filter: drop-shadow(0 5px 15px rgba(0, 0, 0, 0.5));


            /* --- ã€ä¿®æ­£ã€‘ã‚ã‚‰ã‚†ã‚‹transitionã‚’ç„¡åŠ¹åŒ– --- */
            transition: none;
            pointer-events: none;
            z-index: 10000;
            margin: 0 !important;
        }

        /* ç›¤é¢ã«ç½®ã‹ã‚ŒãŸæ™‚ã®ãƒ–ãƒ­ãƒƒã‚¯ã®è¦‹ãŸç›®ã‚’å…±é€šåŒ– */
        .cell.active {
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 4px;
        }
    </style>
</head>

<body class="puzzle-body">
    <header class="header" style="padding: 20px; display: flex; justify-content: space-between; align-items: center;">
        <div style="font-weight: bold; color: #ffcc00;">POPUZZLE</div>
        <div style="font-size: 20px; background: #333; padding: 5px 15px; border-radius: 20px;">
            Score: <span id="score">0</span>
        </div>
    </header>

    <main>
        <div id="grid" class="grid-board"></div>

        <div class="piece-container" id="piece-dock">
            <div id="p1" class="piece-item" draggable="true" ondragstart="onDragStart(event)">Lå­—å‹</div>
            <div id="p2" class="piece-item" draggable="true" ondragstart="onDragStart(event)">å››è§’å‹</div>
            <div id="p3" class="piece-item" draggable="true" ondragstart="onDragStart(event)">Iå­—å‹</div>
        </div>

        <div id="game-over" class="modal">
            <div class="modal-content" style="color:#000;">
                <h2>ç½®ã‘ãªããªã£ãŸï¼</h2>
                <p>ç²å¾—ã‚¹ã‚³ã‚¢ã‚’ãƒã‚¤ãƒ³ãƒˆã«ã—ã¾ã™ã‹ï¼Ÿ</p>
                <button class="btn-main" onclick="finishGame()">ãƒã‚¤ãƒ³ãƒˆã‚’ã‚‚ã‚‰ã£ã¦çµ‚äº†</button>
                <button class="btn-save" onclick="location.reload()">ğŸ“º åºƒå‘Šã‚’è¦‹ã¦å¾©æ´»</button>
            </div>
        </div>
    </main>

    <footer>
        <nav class="nav-bar">
            <a href="index.html" class="nav-item"><img src="imgs/top-icon-home.png" alt=""></a>
            <a href="calendar.html" class="nav-item"><img src="imgs/top-icon-calendar.png" alt=""></a>
            <a href="puzzle.html" class="nav-item"><img src="imgs/top-icon-game.png" alt=""></a>
        </nav>
    </footer>

    <script src="js/blast-logic.js"></script>
</body>

</html>
