<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>co:me-HOME</title>
    <link rel="stylesheet" href="./css/style.css">
    <link rel="icon" href="img/favicon.ico" type="image/x-icon">

    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js');
        }
    </script>
    <link rel="manifest" href="manifest.json">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kosugi+Maru&display=swap" rel="stylesheet">

</head>

<body>

    <header class="top-center-header">
        <div class="top-icon-point">

            <span class="large-date " style="margin:  0 0 10px 0 ; font-size: 24px; font-weight: 800;"
                id="current-date-display">2026/01/23</span>

            <div class="point-display">
                <span id="point-display">0</span>
                <p>pt</p>
            </div>

            <span id="face" class="face-display"><a href="character.html"><img src="imgs/icons/16.png" alt=""
                        width="100px"></a></span>

        </div>

        <div class="input-panel">
            <div class="lv-text">
                <p style="font-size: 2px;">ダメージ:</p> <span id="lv">0</span>
            </div>
            <p id="target-part">痛いところを押してね</p>
        </div>

        <div class="top-items">
            <a href="analysis.html" class="icon-box" style="text-decoration: none; color: inherit;"><img
                    src="imgs/home-icon-box-1-or.png" alt=""></a>
            <a href="history.html" class="icon-box"
                style="text-decoration: none; color: inherit; position: relative; display: inline-block;">
                <img src="imgs/home-icon-box-2-sk.png" alt="分析へ">
                <span id="home-notif-badge" class="notif-badge" style="display: none; top: 10px; right: 10px;"></span>
            </a>
            <a href="action.html" class="icon-box" style="text-decoration: none; color: inherit;"><img
                    src="imgs/home-icon-box-3-md.png" alt=""></a>
        </div>
    </header>
    <main>

        <div class="date-header">



            <div class="date-header-floating">
                <button id="today-reset-btn" onclick="resetToToday()"
                    style="margin: 10px; top: -40px; right: 10px; font-size: 18px; background: #fff; border: 2px solid #8d6e63; color: #8d6e63; border-radius: 30px; padding: 6px 10px; cursor: pointer; font-weight: bold;">
                    今日を表示
                </button>
                <button id="view-flip-btn" onclick="toggleBodyView()">うしろを表示</button>
            </div>

        </div>



        <div class="silhouette-container">
            <button class="date-nav-btn prev-btn" onclick="changeDate(-1)">◀</button>

            <div class="body-canvas-wrapper">


                <div class="body-canvas" id="body-canvas-main">
                    <span class="body-outline-char">
                        <img src="imgs/top-silhouette-icon.png" class="body-silhouette" alt="" height="330px"
                            width="100%">
                    </span>

                    <div id="part-head" class="touch-area area-head"><span>あたま</span></div>
                    <div id="part-ear-r" class="touch-area area-ear-r"><span>みみ</span></div>
                    <div id="part-ear-l" class="touch-area area-ear-l"><span>みみ</span></div>
                    <div id="part-neck" class="touch-area area-neck"><span>くび</span></div>
                    <div id="part-chest" class="touch-area area-chest"><span>むね</span></div>
                    <div id="part-stomach" class="touch-area area-stomach"><span>おなか</span></div>
                    <div id="part-leg-l" class="touch-area area-leg-l"><span>あし</span></div>
                    <div id="part-leg-r" class="touch-area area-leg-r"><span>あし</span></div>
                    <div id="part-arm-l" class="touch-area area-arm-l"><span>うで</span></div>
                    <div id="part-arm-r" class="touch-area area-arm-r"><span>うで</span></div>


                    <div id="part-back" class="touch-area area-back back-part" style="display: none;">
                        <span>こし・せなか</span>
                    </div>

                </div>
            </div>

            <button class="date-nav-btn next-btn" onclick="changeDate(1)">▶</button>
        </div>

    </main>
    <footer>
        <nav class="nav-bar">
            <a href="javascript:void(0)" class="nav-item active" id="home-link">
                <img src="imgs/top-icon-home.png" alt="HOME">
            </a>
            <a href="calendar.html" class="nav-item"><img src="imgs/top-icon-calendar.png" alt=""></a>
            <a href="puzzle.html" class="nav-item"><img src="imgs/top-icon-game.png" alt=""></a>
        </nav>
    </footer>


    <script src="js/script.js"></script>
    <script>
        const homeLink = document.getElementById('home-link');
        let lastTap = 0;

        homeLink.addEventListener('click', function (e) {
            const now = new Date().getTime();
            const timesince = now - lastTap;

            // 300ミリ秒以内の連続クリックを「ダブルタップ」と判定
            if (timesince < 300 && timesince > 0) {
                // ダブルタップ時の挙動：login.htmlへ
                window.location.href = 'login.html';
            } else {
                // シングルタップ時の挙動：本来のHOME画面（index.html）へ
                // もし「1回押しでは何もさせたくない」なら、この中身は空でOKです
                console.log("Single tap: Stay here or go to index.html");
                // window.location.href = 'index.html'; 
            }

            lastTap = now;
        });
    </script>
</body>

</html>